!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).cerbero=n()}(this,(function(){"use strict";const e="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)&&"function"==typeof module.require?module.require:null;var n=function(n){if(e){const t=e("worker_threads").Worker;return function(e){return new t(n,e)}}return function(e){return new Worker(n,e)}}("web-worker-0.js"),t=function(){return(t=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)},r=function(e){var n=e.id;return e.nodeName.toLowerCase()+(n?"#"+n:"")},i=function(e){var n="";return e.parentElement&&(n=i(e.parentElement)),n+" > "+r(e)},o=function(e){var n=e.id,t=e.name,o=e.nodeName,s=e.constructor,c=e.className,a=e.getBoundingClientRect;return{id:n,name:t,className:c,type:o,domType:s.name,identifier:r(e),domStructure:i(e),position:a?e.getBoundingClientRect():{}}};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */return new function(){var e=this;if(this.textEncoder=new TextEncoder,this.addEventListner=function(n){e.cb=n},this._sendToWorker=function(n,r,i){void 0===i&&(i=!0);var s=i?function(e){var n,r={};for(var i in e)e[i]&&"MemoryInfo"===e[i].constructor.name?r[i]={totalJSHeapSize:(n=e[i]).totalJSHeapSize,usedJSHeapSize:n.usedJSHeapSize,jsHeapSizeLimit:n.jsHeapSizeLimit}:e[i]instanceof Node?r[i]=o(e[i]):e[i]instanceof Window?r[i]="Window":e[i]instanceof window.InputDeviceCapabilities==0&&"function"!=typeof e[i]&&(r[i]=e[i]);return r.path=null,t({},r)}(r):r;s=e.textEncoder.encode(JSON.stringify(s)),e.cerberoWorker.postMessage({type:n,event:s})},this._receiveWorkerMessage=function(n){if(!e.cb)throw new Error("[Cerbero] no callback setted");e.cb.apply(null,[n.data])},this._initListener=function(){document.addEventListener("click",(function(n){return e._sendToWorker("click",n)})),e.cerberoWorker.onmessage=e._receiveWorkerMessage},"undefined"==typeof Worker)return null;this.cerberoWorker=new n,this._initListener=this._initListener.bind(this),this._sendToWorker=this._sendToWorker.bind(this),this._receiveWorkerMessage=this._receiveWorkerMessage.bind(this),this._sendToWorker("performance",window.performance),this._initListener()}}));
