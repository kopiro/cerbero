!function(){"use strict";var e=function(){function e(){}return e.formatEvent=function(e){var t=Date.now();return{type:"click",time:t,after:t-e.startDate,data:{position:{screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,x:e.x,y:e.y,offsetX:e.offsetX,offsetY:e.offsetY},keys:{ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey},elements:{target:e.target}}}},e}(),t=function(){function e(){}return e.formatEvent=function(e){return{type:"performance",time:Date.now(),data:{timing:e.timing,navigation:e.navigation,memory:e.memory}}},e}(),n=function(){function e(){}return e.formatEvent=function(e){var t=Date.now();return{type:"mouseExit",time:t,after:t-e.startDate,data:{position:{screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,x:e.x,y:e.y,offsetX:e.offsetX,offsetY:e.offsetY},keys:{ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey},elements:{fromElement:e.fromElement}}}},e}(),o=function(){function e(){}return e.formatEvent=function(e){var t=Date.now(),n=e.event,o=n.anchorNode,s=n.anchorOffset,r=n.focusNode,a=n.focusOffset,f=n.baseNode,i=n.baseOffset,c=n.extentNode,l=n.extentOffset;return o.offset=s,r.offset=a,f.offset=i,c.offset=l,{type:"selection",time:t,after:t-e.startDate,data:{text:e.selection,elements:{anchorNode:o,focusNode:r,baseNode:f,extentNode:c}}}},e}(),s=function(){function e(){}return e.formatEvent=function(e){var t=e.event,n=e.scroll,o=e.height,s=e.startDate,r=Date.now();return{type:"scroll",time:r,after:r-s,data:{scroll:{fromTop:n,domHeight:o,percentage:Math.ceil(100*n/o)},elements:{srcElement:t.srcElement,target:t.target}}}},e}();new function(){var r=this;this.textDecoder=new TextDecoder,this.formatters={click:e,performance:t,mouseexit:n,selection:o,scroll:s},this.onMessage=function(e){var t,n=e.data,o=n.type,s=n.event,a=JSON.parse(r.textDecoder.decode(s));r.formatters[o]&&(t=r.formatters[o].formatEvent(a)),t&&postMessage(t,null)},this.self=self,this.self.addEventListener("message",this.onMessage.bind(this)),this.onMessage=this.onMessage.bind(this)}}();
